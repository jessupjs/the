<!DOCTYPE html>
<meta charset="utf-8">

<body>  

<h1> Practice the use of the open right hand </h1>

<h4 id="header"> </h4>

<script src="//d3js.org/d3.v4.min.js"></script>
<script src="lib/leap-1.0.0.js"></script>

<script>

// set the dimensions and margins of the graph
var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");
  
var circle_1 = svg
  .append("circle")
  .attr("class", "circle")
  .attr("r", 200)
  .attr("cx", 300)
  .attr("cy", 200)
  .style("fill", "lightpink")

  var circle_2 = svg
  .append("circle")
  .attr("class", "circle")
  .attr("r", 150)
  .attr("cx", 300)
  .attr("cy", 250)
  .style("fill", "red")

  var circle_3 = svg
  .append("circle")
  .attr("class", "circle")
  .attr("r", 100)
  .attr("cx", 300)
  .attr("cy", 300)
  .style("fill", "darkred")
                        

  Leap.loop({

        // frame callback is run before individual frame components
        frame: function(frame){
   
        },

        // hand callbacks are run once for each hand in the frame
        hand: function(hand){

          document.getElementById("header").innerHTML = "-"

        if(hand.indexFinger.extended == true && hand.type == 'right' 
            && hand.thumb.extended == true
            && hand.middleFinger.extended == true 
            && hand.ringFinger.extended == true 
            && hand.pinky.extended == true){

          document.getElementById("header").innerHTML = "Hand detected"

          var hand_z_position = hand._translation[2]
          var circles = d3.selectAll(".circle")._groups[0]

              if (hand_z_position > 0){
                  circles[1].style.visibility = "visible";
                  circles[2].style.visibility = "visible";
                  circles[0].style.visibility = "visible";

              }
                    
              if (hand_z_position < 0 && hand_z_position > -100){
                  circles[1].style.visibility = "visible";
                  circles[2].style.visibility = "hidden";
                  circles[0].style.visibility = "visible";

              }

              if (hand_z_position < -100 && hand_z_position > -150){
                  circles[1].style.visibility = "hidden";
                  circles[2].style.visibility = "hidden";
                  circles[0].style.visibility = "visible";

              }

              if (hand_z_position < -150){
                  circles[1].style.visibility = "hidden";
                  circles[2].style.visibility = "hidden";
                  circles[0].style.visibility = "hidden";
              }


        }
      } 
  });  
    
</script>

<a id= "link" href="finish.html"> NEXT </a>
</body>